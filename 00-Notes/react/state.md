# UseState

## Too many re-renders

- 当我们直接在函数体中调用 <blue>setState()</blue>时，就会发生上述错误
- 问题：不是说当新的state值和旧的state值相同的时候不会触发组件的重复渲染吗？
- setState() 的执行流程
- - setState() -> dispatchSetData() 会先判断组件当前处于什么阶段
- - 如果是组件的渲染阶段，则不会检查state值是否相同
- - 如果是渲染结束之后的阶段，则会判断比较state值
- - - 如果值不相同，则会对组件重新渲染
- - - 如果值相同，React会在一些情况下执行当前组件的渲染，但是这次渲染不会触发其子组件的渲染，这次渲染也不会对当前组件产生实际效果。